@import 'tailwindcss';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';
@source '../**/*.blade.php';
@source '../**/*.js';

@import "./iconoir.css";

@theme {
    --font-sans: 'Inter', 'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
        'Segoe UI Symbol', 'Noto Color Emoji';
    --color-accent: #000000;
    --color-accent-fg: #ffffff;
    
    --animate-slide-up: slide-up 0.4s cubic-bezier(0.16, 1, 0.3, 1);

    @keyframes slide-up {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
    }
}

:root {
    --window-opacity: 0.85;
}

/* Base Styles */
body {
    @apply font-sans text-neutral-900 dark:text-neutral-100 h-screen w-screen overflow-hidden transition-colors duration-500;
    background: transparent;
}

body.web-mode {
    @apply bg-neutral-100 dark:bg-neutral-950;
}

/* Modern Scrollbar Styles */
* {
    scrollbar-width: thin;
    scrollbar-color: transparent transparent;
    transition: scrollbar-color 0.3s ease;
}

*:hover,
*:focus-within,
*:active {
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

.dark *:hover,
.dark *:focus-within,
.dark *:active {
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

/* Webkit Scrollbar */
*::-webkit-scrollbar {
    width: 8px;
    height: 8px;
    transition: width 0.2s ease;
}

*::-webkit-scrollbar:hover {
    width: 12px;
}

*::-webkit-scrollbar-track {
    background: transparent;
    margin: 4px;
}

*::-webkit-scrollbar-thumb {
    background: transparent;
    border-radius: 6px;
    border: 2px solid transparent;
    background-clip: padding-box;
    transition: background 0.3s ease;
}

*:hover::-webkit-scrollbar-thumb,
*:focus-within::-webkit-scrollbar-thumb,
*:active::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    background-clip: padding-box;
}

.dark *:hover::-webkit-scrollbar-thumb,
.dark *:focus-within::-webkit-scrollbar-thumb,
.dark *:active::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    background-clip: padding-box;
}

*::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.35);
    background-clip: padding-box;
}

.dark *::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.35);
    background-clip: padding-box;
}

@layer components {
    
    /* Glass Panel */
    .glass-panel {
        @apply h-full w-full flex flex-col relative overflow-hidden;
        @apply backdrop-blur-3xl shadow-2xl transition-all duration-500;
        @apply border border-white/40 dark:border-white/10;
        background: rgba(255, 255, 255, var(--window-opacity));
    }
    
    .dark .glass-panel {
        background: rgba(18, 18, 18, calc(var(--window-opacity) * 0.88));
    }
    
    /* Native mode adjustments */
    body:not(.web-mode) .glass-panel {
        @apply border-0 shadow-none rounded-2xl overflow-hidden;
    }
    
    body:not(.web-mode) .chat-header {
        @apply rounded-t-2xl bg-white/95 dark:bg-[#1e1e1e]/95;
    }
    
    body:not(.web-mode) .chat-container {
        @apply bg-white/95 dark:bg-[#121212]/95;
    }

    .glass-header {
        @apply h-12 px-6 flex items-center justify-between shrink-0 z-20;
        @apply border-b border-black/5 dark:border-white/5;
        @apply bg-white/40 dark:bg-white/5 backdrop-blur-md;
        -webkit-app-region: drag;
    }
    
    .glass-header button,
    .glass-header a,
    .glass-header input,
    .glass-header select {
        -webkit-app-region: no-drag;
    }

    /* Chat Container */
    .chat-container {
        @apply h-full w-full flex flex-col relative overflow-hidden;
        @apply backdrop-blur-3xl shadow-2xl transition-all duration-500;
        @apply border border-white/40 dark:border-white/10;
        background: rgba(255, 255, 255, var(--window-opacity));
    }
    
    .dark .chat-container {
        background: rgba(18, 18, 18, calc(var(--window-opacity) * 0.88));
    }

    .chat-header {
        @apply h-12 px-6 flex items-center justify-between shrink-0 z-20;
        @apply border-b border-black/5 dark:border-white/5;
        @apply bg-white/40 dark:bg-white/5 backdrop-blur-md;
        -webkit-app-region: drag;
    }
    
    .chat-header button,
    .chat-header a,
    .chat-header input,
    .chat-header select {
        -webkit-app-region: no-drag;
    }

    .chat-messages {
        @apply flex-1 overflow-y-auto p-6 md:p-10 space-y-8 pb-36;
    }

    /* Chat Rows */
    .chat-row {
        @apply flex gap-4 max-w-3xl w-full animate-slide-up;
    }
    
    .chat-row.user { 
        @apply ml-auto justify-end; 
    }

    /* Chat Bubbles */
    .chat-bubble {
        @apply px-5 py-3 text-[15px] leading-relaxed shadow-sm relative max-w-full break-words;
    }
    
    .chat-bubble.primary {
        @apply bg-accent text-accent-fg rounded-[20px] rounded-tr-[4px] dark:bg-white dark:text-black;
    }
    
    .chat-bubble.secondary {
        @apply bg-white/60 dark:bg-white/10 backdrop-blur-md border border-white/50 dark:border-white/5;
        @apply text-neutral-800 dark:text-neutral-200 rounded-[20px] rounded-tl-[4px];
    }

    /* Avatar */
    .purr-ai-logo {
        @apply w-8 h-8;
        @apply flex items-center justify-center shadow-inner shrink-0;
    }

    /* Buttons */
    .circle-btn {
        @apply w-10 h-10 rounded-full flex-shrink-0 flex items-center justify-center cursor-pointer;
        @apply transition-transform active:scale-95;
    }
    
    .circle-btn.ghost {
        @apply text-neutral-500 hover:text-neutral-900 dark:hover:text-white;
        @apply hover:bg-black/5 dark:hover:bg-white/10;
    }

    .circle-btn.primary {
        @apply bg-accent text-accent-fg dark:bg-white dark:text-black shadow-md hover:scale-105;
    }

    .btn-icon {
        @apply w-9 h-9 rounded-full flex items-center justify-center cursor-pointer;
        @apply text-neutral-500 hover:text-neutral-900 dark:hover:text-white;
        @apply hover:bg-black/5 dark:hover:bg-white/10 transition-all;
    }

    /* File Cards */
    .file-card {
        @apply flex items-center gap-3 p-2 pr-4 rounded-xl cursor-pointer transition-all;
        @apply bg-white/50 dark:bg-white/5 border border-white/40 dark:border-white/10;
    }
    
    .file-card:hover {
        @apply bg-white/80 dark:bg-white/15;
    }
    
    .file-icon {
        @apply w-10 h-10 rounded-lg flex items-center justify-center text-lg;
        @apply bg-neutral-100 dark:bg-white/10 text-neutral-600 dark:text-neutral-300;
    }

    /* Image Thumbnails */
    .attachment-grid {
        @apply grid grid-cols-3 gap-1.5 mt-2 w-full max-w-[320px];
    }

    .attachment-thumbnail {
        @apply aspect-square rounded-2xl overflow-hidden border border-white/20 relative cursor-pointer;
    }

    .attachment-thumbnail img {
        @apply w-full h-full object-cover transition-transform duration-500;
    }
    
    .attachment-thumbnail:hover img {
        @apply scale-110;
    }

    /* Input Dock */
    .input-dock {
        @apply absolute bottom-6 left-1/2 -translate-x-1/2 w-[calc(100%-3rem)] max-w-3xl z-30;
        @apply bg-white/70 dark:bg-[#1e1e1e]/80 backdrop-blur-2xl;
        @apply border border-white/50 dark:border-white/10;
        @apply rounded-[32px] shadow-lg ring-1 ring-black/5 dark:ring-white/5;
        @apply flex items-end gap-2 p-2 transition-shadow focus-within:shadow-xl;
    }

    .input-field {
        @apply w-full bg-transparent text-[15px] text-neutral-900 dark:text-white;
        @apply placeholder-neutral-500 focus:outline-none resize-none max-h-32;
        @apply py-2.5 px-2;
    }

    /* Dropdown */
    .dropdown {
        @apply absolute right-0 top-full mt-2 w-64 rounded-2xl overflow-hidden;
        @apply bg-white/80 dark:bg-[#1e1e1e]/80 backdrop-blur-2xl;
        @apply border border-white/50 dark:border-white/10 shadow-xl;
        @apply z-50;
    }

    .dropdown-item {
        @apply w-full px-4 py-3 text-left text-sm transition-colors;
        @apply text-neutral-700 dark:text-neutral-300;
        @apply hover:bg-black/5 dark:hover:bg-white/10;
    }

    /* Message Timestamp */
    .message-timestamp {
        @apply text-[10px] opacity-40 mt-1 font-medium;
    }

    /* Welcome Screen */
    .welcome-container {
        @apply flex flex-col items-center justify-center h-full text-center px-4;
    }

    .welcome-logo {
        @apply w-24 h-24 mb-4 opacity-50;
    }

    .welcome-title {
        @apply text-2xl font-semibold text-gray-900 dark:text-white mb-2;
    }

    .welcome-message {
        @apply text-gray-600 dark:text-gray-400 max-w-md;
    }

    /* Window Controls */
    .window-controls {
        @apply flex items-center gap-2;
        -webkit-app-region: no-drag;
    }
    
    .window-controls-mac {
        @apply gap-2;
    }
    
    .window-controls-default {
        @apply gap-0;
    }
    
    /* macOS Style Buttons */
    .window-btn-close-mac,
    .window-btn-minimize-mac,
    .window-btn-maximize-mac {
        @apply w-3 h-3 rounded-full flex items-center justify-center;
        @apply transition-all cursor-pointer;
    }
    
    .window-btn-close-mac {
        @apply bg-[#FF5F57];
    }
    
    .window-btn-minimize-mac {
        @apply bg-[#FEBC2E];
    }
    
    .window-btn-maximize-mac {
        @apply bg-[#28C840];
    }
    
    .window-btn-close-mac:hover,
    .window-btn-minimize-mac:hover,
    .window-btn-maximize-mac:hover {
        @apply opacity-80;
    }
    
    .window-btn-dot {
        @apply hidden;
    }
    
    .window-btn-close-mac:hover .window-btn-dot,
    .window-btn-minimize-mac:hover .window-btn-dot,
    .window-btn-maximize-mac:hover .window-btn-dot {
        @apply block w-1.5 h-1.5 bg-black/50 rounded-full;
    }
    
    /* Windows/Linux Style Buttons */
    .window-controls-default {
        @apply flex items-center gap-1;
    }
    
    .window-btn {
        @apply w-9 h-9 rounded-full flex items-center justify-center cursor-pointer;
        @apply text-neutral-500 hover:text-neutral-900 dark:hover:text-white;
        @apply hover:bg-black/5 dark:hover:bg-white/10 transition-all;
    }
    
    .window-btn.close:hover {
        @apply bg-red-500 text-white;
    }

    /* Settings Components */
    .settings-card {
        @apply p-6 rounded-2xl bg-white/40 dark:bg-white/5 backdrop-blur-md;
        @apply border border-white/50 dark:border-white/10;
    }

    .settings-label {
        @apply block text-sm font-medium text-neutral-900 dark:text-white mb-2;
    }

    .settings-input {
        @apply w-full px-4 py-3 rounded-xl text-[15px];
        @apply bg-white/60 dark:bg-white/10 backdrop-blur-md;
        @apply border border-white/50 dark:border-white/10;
        @apply text-neutral-900 dark:text-white placeholder-neutral-500;
        @apply focus:outline-none focus:ring-2 focus:ring-accent/20 dark:focus:ring-white/20;
        @apply transition-all;
    }

    .settings-input option {
        @apply bg-white dark:bg-neutral-900;
        @apply text-neutral-900 dark:text-white;
    }

    .settings-input select option {
        @apply bg-white dark:bg-neutral-900;
        @apply text-neutral-900 dark:text-white;
    }

    .settings-radio-card {
        @apply flex-1 cursor-pointer;
    }

    .settings-radio-card input:checked + .settings-radio-label {
        @apply bg-white dark:bg-white/20 text-neutral-900 dark:text-white shadow-sm;
    }

    .settings-radio-label {
        @apply block px-4 py-3 rounded-xl text-center text-sm font-medium;
        @apply bg-white/40 dark:bg-white/5 text-neutral-600 dark:text-neutral-400;
        @apply border border-white/50 dark:border-white/10;
        @apply transition-all;
    }

    .settings-toggle {
        @apply relative w-12 h-6 rounded-full transition-colors;
        @apply bg-neutral-300 dark:bg-neutral-700;
    }

    .settings-toggle.active {
        @apply bg-accent dark:bg-white;
    }

    .settings-toggle-thumb {
        @apply absolute top-0.5 left-0.5 w-5 h-5 rounded-full bg-white dark:bg-neutral-900;
        @apply transition-transform;
    }

    .settings-toggle.active .settings-toggle-thumb {
        @apply translate-x-6;
    }

    .settings-slider {
        @apply flex-1 h-2 rounded-full appearance-none cursor-pointer;
        @apply bg-white/40 dark:bg-white/10 backdrop-blur-md;
        @apply border border-white/50 dark:border-white/10;
    }

    .settings-slider::-webkit-slider-thumb {
        @apply appearance-none w-5 h-5 rounded-full;
        @apply bg-accent dark:bg-white shadow-md;
        @apply cursor-pointer transition-transform hover:scale-110;
    }

    .settings-slider::-moz-range-thumb {
        @apply w-5 h-5 rounded-full border-0;
        @apply bg-accent dark:bg-white shadow-md;
        @apply cursor-pointer transition-transform hover:scale-110;
    }

    /* Help Text */
    .help-text {
        @apply text-xs text-neutral-500 dark:text-neutral-500 mt-2;
    }
}
